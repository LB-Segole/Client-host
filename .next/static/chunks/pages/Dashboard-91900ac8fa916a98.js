(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[156],{6274:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Dashboard",function(){return s(1348)}])},3759:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var r=s(7294),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let s=(0,r.forwardRef)((s,i)=>{let{color:l="currentColor",size:c=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:u="",children:h,...m}=s;return(0,r.createElement)("svg",{ref:i,...n,width:c,height:c,stroke:l,strokeWidth:d?24*Number(o)/Number(c):o,className:["lucide","lucide-".concat(a(e)),u].join(" "),...m},[...t.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(h)?h:[h]])});return s.displayName="".concat(e),s}},641:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(3759).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1700:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(3759).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},530:function(e,t,s){"use strict";s.d(t,{z:function(){return l}});var r=s(5893),n=s(9107),a=s(641);let i=(0,n.j)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{variants:{variant:{default:"bg-blue-600 text-white hover:bg-blue-700",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",ghost:"bg-transparent text-gray-600 hover:bg-gray-50",link:"bg-transparent text-blue-600 hover:underline"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 rounded-md",lg:"h-11 px-8 rounded-md",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=e=>{let{variant:t,size:s,className:n,isLoading:l,children:c,...o}=e;return(0,r.jsx)("button",{className:i({variant:t,size:s,className:n}),disabled:l,...o,children:l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.Z,{className:"mr-2 h-4 w-4 animate-spin"}),c]}):c})}},4582:function(e,t,s){"use strict";s.d(t,{Zb:function(){return a}});var r=s(5893);let n=(0,s(9107).j)("rounded-2xl shadow-lg transition-shadow",{variants:{variant:{default:"bg-white hover:shadow-xl",primary:"bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900"}},defaultVariants:{variant:"default"}}),a=e=>{let{variant:t,className:s,children:a,...i}=e;return(0,r.jsx)("div",{className:n({variant:t,className:s}),...i,children:a})}},1887:function(e,t,s){"use strict";s.d(t,{k:function(){return h}});var r=s(7294),n=s(8444),a=s(5293);class i extends a.EventEmitter{connect(){var e;if((null===(e=this.socket)||void 0===e?void 0:e.readyState)!==WebSocket.OPEN)try{this.socket=new WebSocket(this.config.url),this.setupSocketListeners()}catch(e){this.handleError(e)}}disconnect(){this.socket&&(this.clearReconnectTimer(),this.socket.close(),this.socket=null,this.reconnectCount=0)}send(e){if(!this.socket||this.socket.readyState!==WebSocket.OPEN)throw Error("WebSocket is not connected");let t={...e,timestamp:Date.now()};try{this.socket.send(JSON.stringify(t))}catch(e){this.handleError(e)}}getStatus(){if(!this.socket)return"disconnected";switch(this.socket.readyState){case WebSocket.CONNECTING:return"connecting";case WebSocket.OPEN:return"connected";case WebSocket.CLOSING:case WebSocket.CLOSED:default:return"disconnected"}}setupSocketListeners(){this.socket&&(this.socket.onopen=()=>{this.reconnectCount=0,this.emit("open"),this.send({type:"auth",payload:{token:this.config.token}})},this.socket.onclose=()=>{this.emit("close"),this.handleReconnect()},this.socket.onerror=e=>{this.handleError(e)},this.socket.onmessage=e=>{try{let t=JSON.parse(e.data);this.emit("message",t)}catch(e){this.handleError(Error("Failed to parse WebSocket message"))}})}handleError(e){let t=e instanceof Error?e.message:"Unknown WebSocket error";this.emit("error",Error(t))}handleReconnect(){var e;if(this.reconnectCount>=(null!==(e=this.config.reconnectAttempts)&&void 0!==e?e:3)){this.emit("error",Error("Max reconnection attempts reached"));return}this.clearReconnectTimer(),this.reconnectTimer=setTimeout(()=>{this.reconnectCount++,this.connect()},this.config.reconnectInterval)}clearReconnectTimer(){this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null)}constructor(e){super(),this.socket=null,this.reconnectCount=0,this.reconnectTimer=null,this.config={reconnectAttempts:3,reconnectInterval:5e3,...e}}}let l=null,c=(e,t)=>(l||(l=new i({url:e,token:t})),l),o=()=>{if(!l)throw Error("WebSocket has not been initialized");return l},d=()=>{l&&(l.disconnect(),l=null)},u=(e,t)=>{let[s,n]=(0,r.useState)("disconnected"),[a,i]=(0,r.useState)([]),[l,u]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let s=c(e,t),r=()=>{n("connected"),u(null)},a=()=>{n("disconnected")},l=e=>{n("error"),u(e)},o=e=>{i(t=>[...t,e])};return s.on("open",r),s.on("close",a),s.on("error",l),s.on("message",o),s.connect(),()=>{s.off("open",r),s.off("close",a),s.off("error",l),s.off("message",o),d()}},[e,t]),{status:s,messages:a,error:l,send:(0,r.useCallback)(e=>{try{o().send(e)}catch(e){u(e instanceof Error?e:Error("Failed to send message"))}},[]),connect:()=>o().connect(),disconnect:()=>d()}},h=e=>{let[t,s]=(0,r.useState)(e),[a,i]=(0,r.useState)("idle"),[l,c]=(0,r.useState)(null),[o,d]=(0,r.useState)(null),{status:h,send:m}=u(t.websocketUrl,t.authToken),{playAudio:x,stopAudio:f}=(0,n.Q)(),v=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AGENT_ERROR";d(e instanceof Error?Object.assign(e,{code:t}):Object.assign(Error("Unknown error"),{code:t})),i("error")},[]),g=(0,r.useCallback)(async()=>{try{if("idle"!==a)throw Error("Agent can only be started from idle state");i("initializing"),m({type:"agent.start",payload:{config:t,timestamp:Date.now()}}),i("active")}catch(e){v(e,"AGENT_START_ERROR")}},[t,a,m,v]),j=(0,r.useCallback)(async()=>{try{if("idle"===a)return;m({type:"agent.stop",payload:{agentId:t.id}}),f(),i("idle"),c(null)}catch(e){v(e,"AGENT_STOP_ERROR")}},[t.id,a,m,f,v]),b=(0,r.useCallback)(async e=>{try{if("active"!==a)throw Error("Agent must be active to send messages");m({type:"agent.message",payload:{agentId:t.id,message:e,callId:null==l?void 0:l.id}})}catch(e){v(e,"AGENT_MESSAGE_ERROR")}},[t.id,null==l?void 0:l.id,a,m,v]),p=(0,r.useCallback)(async e=>{try{let s=await fetch("".concat(t.apiUrl,"/tts"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.authToken)},body:JSON.stringify({text:e})});if(!s.ok)throw Error("Speech synthesis failed");let r=await s.arrayBuffer();await x(r)}catch(e){v(e,"SPEECH_SYNTHESIS_ERROR")}},[t.apiUrl,t.authToken,x,v]);return(0,r.useEffect)(()=>{"error"===h&&v(Error("WebSocket connection error"),"WEBSOCKET_ERROR")},[h,v]),(0,r.useEffect)(()=>{(null==l?void 0:l.status)==="ended"&&j()},[null==l?void 0:l.status,j]),(0,r.useEffect)(()=>()=>{f(),"idle"!==a&&j()},[a,j,f]),{config:t,state:a,error:o,currentCall:l,setConfig:s,startAgent:g,stopAgent:j,sendMessage:b,synthesizeSpeech:p}}},1802:function(e,t,s){"use strict";s.d(t,{G:function(){return a}});var r=s(7294),n=s(4501);let a=()=>{let e=(0,r.useContext)(n.uo);if(!e)throw Error("useCalls must be used within a CallProvider");return e}},1348:function(e,t,s){"use strict";s.r(t),s.d(t,{Dashboard:function(){return v},default:function(){return g}});var r=s(5893),n=s(7837),a=s(3759);let i=(0,a.Z)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var l=s(1700);let c=(0,a.Z)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),o=(0,a.Z)("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),d=(0,a.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);s(7294);var u=s(530),h=s(4582),m=s(1887),x=s(1802);let f=e=>{let{icon:t,title:s,value:n,change:a}=e,l=a>=0;return(0,r.jsxs)(h.Zb,{className:"p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"p-3 rounded-lg bg-blue-50 text-blue-600",children:t}),(0,r.jsxs)("div",{className:"flex items-center text-sm font-medium ".concat(l?"text-green-600":"text-red-600"),children:[a,"% ",(0,r.jsx)(i,{className:"h-4 w-4 ml-1 ".concat(!l&&"transform rotate-90")})]})]}),(0,r.jsx)("h3",{className:"mt-4 text-lg font-semibold text-gray-900",children:n}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:s})]})},v=()=>{var e,t;let{config:s}=(0,m.k)({id:"default",websocketUrl:"wss://api.voiceai.tech/v1/ws",apiUrl:"https://api.voiceai.tech/v1",authToken:"",voice:"en-US-Standard-A",speakingRate:1,pitch:0,language:"en-US"}),{data:a,isLoading:i}=(0,n.a)({queryKey:["dashboard-stats"],queryFn:async()=>{let e=await fetch("".concat(s.apiUrl,"/stats"),{headers:{Authorization:"Bearer ".concat(s.authToken)}});if(!e.ok)throw Error("Failed to fetch dashboard stats");return e.json()}}),{callHistory:v}=(0,x.G)(),g=v.length,j=v.filter(e=>"ended"===e.status&&e.duration>0).length,b=v.reduce((e,t)=>e+t.duration,0)/(j||1),p=new Set(v.map(e=>"user-123"===e.from?e.to:e.from)).size;return i?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),(0,r.jsxs)("div",{className:"mt-8 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"rounded-md bg-indigo-500 p-3",children:(0,r.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Calls"}),(0,r.jsx)("dd",{className:"text-lg font-semibold text-gray-900",children:null!==(e=null==a?void 0:a.totalCalls)&&void 0!==e?e:0})]})})]})})}),(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"rounded-md bg-green-500 p-3",children:(0,r.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Active Calls"}),(0,r.jsx)("dd",{className:"text-lg font-semibold text-gray-900",children:null!==(t=null==a?void 0:a.activeCalls)&&void 0!==t?t:0})]})})]})})}),(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"rounded-md bg-yellow-500 p-3",children:(0,r.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Average Duration"}),(0,r.jsx)("dd",{className:"text-lg font-semibold text-gray-900",children:(null==a?void 0:a.averageCallDuration)?"".concat(Math.round(a.averageCallDuration/60),"m"):"0m"})]})})]})})}),(0,r.jsx)("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:(0,r.jsx)("div",{className:"p-5",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"rounded-md bg-blue-500 p-3",children:(0,r.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})}),(0,r.jsx)("div",{className:"ml-5 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Success Rate"}),(0,r.jsx)("dd",{className:"text-lg font-semibold text-gray-900",children:(null==a?void 0:a.successRate)?"".concat(Math.round(100*a.successRate),"%"):"0%"})]})})]})})})]}),(0,r.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,r.jsx)(f,{icon:(0,r.jsx)(l.Z,{className:"h-5 w-5"}),title:"Total Calls",value:g.toString(),change:12}),(0,r.jsx)(f,{icon:(0,r.jsx)(c,{className:"h-5 w-5"}),title:"Completed Calls",value:j.toString(),change:8}),(0,r.jsx)(f,{icon:(0,r.jsx)(o,{className:"h-5 w-5"}),title:"Avg. Duration",value:"".concat(Math.floor(b/60),"m ").concat(Math.floor(b%60),"s"),change:5}),(0,r.jsx)(f,{icon:(0,r.jsx)(d,{className:"h-5 w-5"}),title:"Unique Contacts",value:p.toString(),change:15})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,r.jsxs)(h.Zb,{className:"lg:col-span-2 p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Recent Activity"}),(0,r.jsx)(u.z,{variant:"outline",size:"sm",children:"View All"})]}),(0,r.jsx)("div",{className:"space-y-6",children:v.slice(0,3).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"p-2 rounded-full bg-gray-100",children:(0,r.jsx)(l.Z,{className:"h-5 w-5 text-gray-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:"user-123"===e.from?e.to:e.from}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["user-123"===e.from?"Outgoing":"Incoming"," â€¢ ",new Date(e.timestamp).toLocaleString()]})]})]}),(0,r.jsxs)("div",{className:"text-sm font-medium",children:[Math.floor(e.duration/60),"m ",e.duration%60,"s"]})]},e.id))})]}),(0,r.jsxs)(h.Zb,{className:"p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Quick Actions"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)(u.z,{className:"w-full bg-blue-600 hover:bg-blue-700",children:[(0,r.jsx)(l.Z,{className:"mr-2 h-5 w-5"}),"Start New Call"]}),(0,r.jsxs)(u.z,{variant:"outline",className:"w-full",children:[(0,r.jsx)(d,{className:"mr-2 h-5 w-5"}),"Manage Contacts"]}),(0,r.jsxs)(u.z,{variant:"outline",className:"w-full",children:[(0,r.jsx)(c,{className:"mr-2 h-5 w-5"}),"View Analytics"]})]})]})]})]})})};var g=v},9107:function(e,t,s){"use strict";s.d(t,{j:function(){return a}});let r=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=function(){for(var e,t,s=0,r="",n=arguments.length;s<n;s++)(e=arguments[s])&&(t=function e(t){var s,r,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var a=t.length;for(s=0;s<a;s++)t[s]&&(r=e(t[s]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r)}return n}(e))&&(r&&(r+=" "),r+=t);return r},a=(e,t)=>s=>{var a;if((null==t?void 0:t.variants)==null)return n(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:i,defaultVariants:l}=t,c=Object.keys(i).map(e=>{let t=null==s?void 0:s[e],n=null==l?void 0:l[e];if(null===t)return null;let a=r(t)||r(n);return i[e][a]}),o=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{});return n(e,c,null==t?void 0:null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:s,className:r,...n}=t;return Object.entries(n).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...l,...o}[t]):({...l,...o})[t]===s})?[...e,s,r]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}}},function(e){e.O(0,[826,888,774,179],function(){return e(e.s=6274)}),_N_E=e.O()}]);